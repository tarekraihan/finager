<?phpdefined('BASEPATH') OR exit('No direct script access allowed');class Debit_card extends CI_Controller{    /**********************************************     * Developer : Tarek Raihan                   *     * Developer Email : tarekraihan@yahoo.com    *     * Project : FINAGER.COM                      *     * Script : Debit Cared controller            *     * Start Date : 03-11-2016                    *     * Last Update : 03-11-2016                   *     **********************************************/    public function add_choose_account($msg=''){        if ($this->session->userdata('email_address')) {            if ($msg == 'success') {                $data['feedback'] = '<div id="message" class="text-center alert alert-success">Successfully Save !!</div>';            } else if ($msg == 'error') {                $data['feedback'] = '<div id="message" class=" text-center alert alert-danger">Problem to Insert !!</div>';            }            $this->form_validation->set_rules('txtAccountType', 'Choose Account', 'trim|required');            if ($this->form_validation->run() == FALSE){                $data['title'] = "Debit Card : Choose Account";                $this->load->view('admin/block/header',$data);                $this->load->view('admin/block/left_nav');                $this->load->view('admin/debit_card/add_choose_account');                $this->load->view('admin/block/footer');            }else{                $date = date('Y-m-d h:i:s');                $this->Common_model->data = array('account_name' => $this->input->post('txtAccountType'), 'created' => $date , 'created_by'=>$this->session->userdata('admin_user_id'));                $this->Common_model->table_name = 'debit_card_choose_account';                $result = $this->Common_model->insert();                if ($result) {                    redirect(base_url().'debit_card/add_choose_account/success');                } else {                    redirect(base_url().'debit_card/add_choose_account/error');                }            }        }else {            $this->session->set_flashdata('error_message', '1');            redirect(base_url().'backdoor/dashboard');        }    }    public function edit_choose_account($msg=''){        if ($this->session->userdata('email_address')) {            if ($msg == 'success') {                $data['feedback'] = '<div id="message"  class="text-center alert alert-success">Successfully Updated !!</div>';            } else if ($msg == 'error') {                $data['feedback'] = '<div id="message" class=" text-center alert alert-danger">Problem to Update !!</div>';            }            $this->form_validation->set_rules('txtAccountType', 'Choose Account', 'trim|required');            if ($this->form_validation->run() == FALSE){                $data['title'] = "Debit Card";                $this->load->view('admin/block/header',$data);                $this->load->view('admin/block/left_nav');                $this->load->view('admin/debit_card/edit_choose_account');                $this->load->view('admin/block/footer');            }else{                $this->Common_model->data = array('account_name' => htmlentities($this->input->post('txtAccountType')),  'modified_by'=>$this->session->userdata('admin_user_id'));                $this->Common_model->table_name = 'debit_card_choose_account';                $this->Common_model->where = array('id' => $this->input->post('txtAccountTypeId'));                $result = $this->Common_model->update();                if ($result) {                    redirect(base_url().'debit_card/edit_choose_account/success');                } else {                    redirect(base_url().'debit_card/edit_choose_account/error');                }            }        }else {            $this->session->set_flashdata('error_message', '1');            redirect(base_url().'backdoor/dashboard');        }    }    public function card_issuer($msg=''){        if ($this->session->userdata('email_address')) {            if ($msg == 'success') {                $data['feedback'] = '<div id="message" class="text-center alert alert-success">Successfully Save !!</div>';            } else if ($msg == 'error') {                $data['feedback'] = '<div id="message" class=" text-center alert alert-danger">Problem to Insert !!</div>';            }            $this->form_validation->set_rules('txtCardIssuer', 'Card Issuer', 'trim|required');            if ($this->form_validation->run() == FALSE){                $data['title'] = "Card-Add Issuer";                $this->load->view('admin/block/header',$data);                $this->load->view('admin/block/left_nav');                $this->load->view('admin/debit_card/card_issuer');                $this->load->view('admin/block/footer');            }else{                $date = date('Y-m-d h:i:s');                $this->Common_model->data = array('card_issuer_name' => $this->input->post('txtCardIssuer'), 'created' => $date , 'created_by'=>$this->session->userdata('admin_user_id'));                $this->Common_model->table_name = 'debit_card_issuer';                $result = $this->Common_model->insert();                if ($result) {                    redirect(base_url().'debit_card/card_issuer/success');                } else {                    redirect(base_url().'debit_card/card_issuer/error');                }            }        }else {            $this->session->set_flashdata('error_message', '1');            redirect(base_url().'backdoor/dashboard');        }    }    public function edit_card_issuer($msg=''){        if ($this->session->userdata('email_address')) {            if ($msg == 'success') {                $data['feedback'] = '<div id="message"  class="text-center alert alert-success">Successfully Updated !!</div>';            } else if ($msg == 'error') {                $data['feedback'] = '<div id="message" class=" text-center alert alert-danger">Problem to Update !!</div>';            }            $this->form_validation->set_rules('txtCardIssuer', 'Card Issuer ', 'trim|required');            if ($this->form_validation->run() == FALSE){                $data['title'] = "Card-Edit Issuer";                $this->load->view('admin/block/header',$data);                $this->load->view('admin/block/left_nav');                $this->load->view('admin/debit_card/edit_card_issuer');                $this->load->view('admin/block/footer');            }else{                $this->Common_model->data = array('card_issuer_name' => htmlentities($this->input->post('txtCardIssuer')),  'modified_by'=>$this->session->userdata('admin_user_id'));                $this->Common_model->table_name = 'debit_card_issuer';                $this->Common_model->where = array('id' => $this->input->post('txtCardIssuerId'));                $result = $this->Common_model->update();                if ($result) {                    redirect(base_url().'debit_card/edit_card_issuer/success');                } else {                    redirect(base_url().'debit_card/edit_card_issuer/error');                }            }        }else {            $this->session->set_flashdata('error_message', '1');            redirect(base_url().'backdoor/dashboard');        }    }    public function i_want($msg=''){        if ($this->session->userdata('email_address')) {            if ($msg == 'success') {                $data['feedback'] = '<div id="message" class="text-center alert alert-success">Successfully Save !!</div>';            } else if ($msg == 'error') {                $data['feedback'] = '<div id="message" class=" text-center alert alert-danger">Problem to Insert !!</div>';            }            $this->form_validation->set_rules('txtIWant', 'I Want', 'trim|required|is_unique[debit_card_i_want.i_want]');            if ($this->form_validation->run() == FALSE) {                $data['title'] = "Finager - I Want";                $this->load->view('admin/block/header', $data);                $this->load->view('admin/block/left_nav');                $this->load->view('admin/debit_card/i_want');                $this->load->view('admin/block/footer');            }else{                $date = date('Y-m-d h:i:s');                $this->Common_model->data = array(                    'i_want' => $this->input->post('txtIWant'),                    'created' => $date ,                    'created_by'=>$this->session->userdata('admin_user_id')                );                $this->Common_model->table_name = 'debit_card_i_want';                $result = $this->Common_model->insert();                if ($result) {                    redirect(base_url().'debit_card/i_want/success');                } else {                    redirect(base_url().'debit_card/i_want/error');                }            }        }else {            redirect(base_url().'backdoor');        }    }    public function edit_i_want($msg=''){        if ($this->session->userdata('email_address')) {            if ($msg == 'success') {                $data['feedback'] = '<div id="message" class="text-center alert alert-success">Successfully Update !!</div>';            } else if ($msg == 'error') {                $data['feedback'] = '<div id="message" class=" text-center alert alert-danger">Problem to Update !!</div>';            }            $this->form_validation->set_rules('txtIWant', 'I Want', 'trim|required');            if ($this->form_validation->run() == FALSE) {                $data['title'] = "Finager -I Want";                $this->load->view('admin/block/header', $data);                $this->load->view('admin/block/left_nav');                $this->load->view('admin/debit_card/edit_i_want');                $this->load->view('admin/block/footer');            }else{                $this->Common_model->data = array(                    'i_want' => htmlentities($this->input->post('txtIWant')),                    'modified_by'=>$this->session->userdata('admin_user_id')                );                $this->Common_model->table_name = 'debit_card_i_want';                $this->Common_model->where = array('id' => $this->input->post('txtIWantId'));                $result = $this->Common_model->update();                if ($result) {                    redirect(base_url().'debit_card/edit_i_want/success');                } else {                    redirect(base_url().'debit_card/edit_i_want/error');                }            }        }else {            redirect(base_url().'backdoor');        }    }    public function looking_for($msg=''){        if ($this->session->userdata('email_address')) {            if ($msg == 'success') {                $data['feedback'] = '<div id="message" class="text-center alert alert-success">Successfully Save !!</div>';            } else if ($msg == 'error') {                $data['feedback'] = '<div id="message" class=" text-center alert alert-danger">Problem to Insert !!</div>';            }            $this->form_validation->set_rules('txtLookingFor', ' Looking For ', 'trim|required|is_unique[debit_card_looking_for.looking_for]');            if ($this->form_validation->run() == FALSE) {                $data['title'] = "Finager - Looking For";                $this->load->view('admin/block/header', $data);                $this->load->view('admin/block/left_nav');                $this->load->view('admin/debit_card/looking_for');                $this->load->view('admin/block/footer');            }else{                $date = date('Y-m-d h:i:s');                $this->Common_model->data = array(                    'looking_for' => $this->input->post('txtLookingFor'),                    'created' => $date ,                    'created_by'=>$this->session->userdata('admin_user_id')                );                $this->Common_model->table_name = 'debit_card_looking_for';                $result = $this->Common_model->insert();//                echo $result; die;                if ($result) {                    redirect(base_url().'debit_card/looking_for/success');                } else {                    redirect(base_url().'debit_card/looking_for/error');                }            }        }else {            redirect(base_url().'backdoor');        }    }    public function edit_looking_for($msg=''){        if ($this->session->userdata('email_address')) {            if ($msg == 'success') {                $data['feedback'] = '<div id="message" class="text-center alert alert-success">Successfully Update !!</div>';            } else if ($msg == 'error') {                $data['feedback'] = '<div id="message" class=" text-center alert alert-danger">Problem to Update !!</div>';            }            $this->form_validation->set_rules('txtLookingFor', 'Looking For', 'trim|required');            if ($this->form_validation->run() == FALSE) {                $data['title'] = "Finager -Edit Looking For";                $this->load->view('admin/block/header', $data);                $this->load->view('admin/block/left_nav');                $this->load->view('admin/debit_card/edit_looking_for');                $this->load->view('admin/block/footer');            }else{                $this->Common_model->data = array(                    'looking_for' => htmlentities($this->input->post('txtLookingFor')),                    'modified_by'=>$this->session->userdata('admin_user_id')                );                $this->Common_model->table_name = 'debit_card_looking_for';                $this->Common_model->where = array('id' => $this->input->post('txtLookingForId'));                $result = $this->Common_model->update();                if ($result) {                    redirect(base_url().'debit_card/edit_looking_for/success');                } else {                    redirect(base_url().'debit_card/edit_looking_for/error');                }            }        }else {            redirect(base_url().'backdoor');        }    }    public function do_upload($path, $field = '')    {        $this->load->library('upload');        $config['upload_path'] = $path;        $config['allowed_types'] = 'jpg|png|jpeg';        $config['max_size'] = '2048';        $config['file_name'] = '1';        $this->upload->initialize($config);        if (!$this->upload->do_upload($field)) {            return $this->upload->display_errors();        } else {            return $this->upload->data();        }    }    public function card_info_list(){        $data['title'] = "Card Information";        $this->load->view('admin/block/header',$data);        $this->load->view('admin/block/left_nav');        $this->load->view('admin/debit_card/card_info_list');        $this->load->view('admin/block/footer');    }    public function add_card_info($msg=""){        if ($this->session->userdata('email_address')) {            if ($msg == 'success') {                $data['feedback'] = '<div id="message" class="text-center alert alert-success">Successfully Save !!</div>';            } else if ($msg == 'error') {                $data['feedback'] = '<div id="message" class=" text-center alert alert-danger">Problem to Insert !!</div>';            }            $this->form_validation->set_rules('txtBankName', 'Bank Name', 'trim|required');            $this->form_validation->set_rules('txtChooseAccount', 'Choose Account', 'trim|required');            $this->form_validation->set_rules('txtLookingFor', 'Looking For', 'trim|required');            $this->form_validation->set_rules('txtIWant', 'I Want', 'trim|required');            $this->form_validation->set_rules('txtCardIssuer', 'Card Issuer', 'trim|required');            $this->form_validation->set_rules('txtCardName', 'Card Name', 'trim|required');            $this->form_validation->set_rules('txtAnnualFee', 'Annual Fee', 'trim|required');            $this->form_validation->set_rules('txtDailyWithdrawalLimit', 'Daily Withdrawal Limit', 'trim|required');            $this->form_validation->set_rules('txtNoOfWithdrawal', 'No Of Withdrawal', 'trim|required');            $this->form_validation->set_rules('txtPerTransactionLimit', 'Per Transaction Limit', 'trim|required');            $this->form_validation->set_rules('txtOwnAtmCharge', 'Own Atm Charge', 'trim|required');            $this->form_validation->set_rules('txtOtherAtmCharge', 'Other Atm Charge', 'trim|required');            $this->form_validation->set_rules('txtAvailableFeatures', 'Features', 'trim|required');            $this->form_validation->set_rules('txtRequirements', 'Requirements', 'trim|required');            $this->form_validation->set_rules('txtTermsAndConditions', 'Terms And Conditions', 'trim|required');            $this->form_validation->set_rules('txtFeesAndCharges', 'Fees And Charges', 'trim|required');            $this->form_validation->set_rules('txtReview', 'Review', 'trim');            if ($this->form_validation->run() == FALSE) {                $data['title'] = "Finager - Card Info";                $this->load->view('admin/block/header', $data);                $this->load->view('admin/block/left_nav');                $this->load->view('admin/debit_card/add_card_info');                $this->load->view('admin/block/footer');            }else{                $date = date('Y-m-d h:i:s');                $this->Common_model->data = array(                    'bank_id' => $this->input->post('txtBankName'),                    'choose_account_id' => $this->input->post('txtChooseAccount'),                    'looking_for_id' => $this->input->post('txtLookingFor'),                    'i_want_id' => $this->input->post('txtIWant'),                    'card_issuer_id' => $this->input->post('txtCardIssuer'),                    'card_name' => $this->input->post('txtCardName'),                    'annual_fee' => $this->input->post('txtAnnualFee'),                    'daily_withdrawal_limit' => $this->input->post('txtDailyWithdrawalLimit'),                    'no_of_withdrawal' => $this->input->post('txtNoOfWithdrawal'),                    'per_transaction_limit' => $this->input->post('txtPerTransactionLimit'),                    'atm_charge_own' => $this->input->post('txtOwnAtmCharge'),                    'atm_charge_other' => $this->input->post('txtOtherAtmCharge'),                    'features' => $this->input->post('txtAvailableFeatures'),                    'requirement' => $this->input->post('txtRequirements'),                    'terms_and_conditions' => $this->input->post('txtTermsAndConditions'),                    'fees_and_charges' => $this->input->post('txtFeesAndCharges'),                    'review' => $this->input->post('txtReview'),                    'created' => $date ,                    'created_by'=>$this->session->userdata('admin_user_id')                );                $this->Common_model->table_name = 'debit_card_info';                $result = $this->Common_model->insert();                if ($result) {                    redirect(base_url().'debit_card/add_card_info/success');                } else {                    redirect(base_url().'debit_card/add_card_info/error');                }            }        }else {            redirect(base_url().'backdoor');        }    }}